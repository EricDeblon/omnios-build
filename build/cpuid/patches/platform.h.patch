diff -pruN '--exclude=*.orig' cpuid-1.5.0~/platform.h cpuid-1.5.0/platform.h
--- cpuid-1.5.0~/platform.h	2017-10-15 02:49:30.000000000 +0000
+++ cpuid-1.5.0/platform.h	2018-01-05 22:51:22.785188909 +0000
@@ -199,6 +199,13 @@
 #endif
 
 #if !defined (OS_DETECTED)
+#if defined (__sun)
+#define OS_DETECTED
+#define TARGET_OS_ILLUMOS
+#endif
+#endif
+
+#if !defined (OS_DETECTED)
 #if defined (__APPLE__) || defined (__MACH__)
 #define OS_DETECTED
 #define TARGET_OS_MACOSX
