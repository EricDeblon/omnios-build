diff -wpruN --no-dereference '--exclude=*.orig' a~/lib/misc/hostinfoPosix.c a/lib/misc/hostinfoPosix.c
--- a~/lib/misc/hostinfoPosix.c	1970-01-01 00:00:00
+++ a/lib/misc/hostinfoPosix.c	1970-01-01 00:00:00
@@ -93,7 +93,7 @@
 #include <paths.h>
 #endif
 
-#if defined(__linux__) || defined(__APPLE__)
+#if defined(__linux__) || defined(__APPLE__) || defined(__illumos__)
 #include <dlfcn.h>
 #endif
 
